/* PageLines Platform - 5.0.134
* Built: Wednesday, April 6th, 2016, 20:13
* http://www.pagelines.com
* Copyright (c) 2016 PageLines; Licensed GPL-3.0 */
!function(a){a(document).ready(function(){window.startTime=(new Date).getTime(),a.plModel.init();var b=(new Date).getTime();b-startTime;plTop()(".iframe-loading-overlay").removeClass("show-overlay"),plTrigger("ready")}),a.plModel={init:function(){var b=this;b.setMasterModel(),a.plBinding.startUp()},getJSON:function(){return ko.toJSON(PLData.viewModel)},getData:function(){return ko.toJS(PLData.viewModel)},getSectionOption:function(a,b){return plIsset(PLData.viewModel[a])?PLData.viewModel[a][b]():!1},setSectionOption:function(a,b,c){PLData.viewModel[a][b](c)},getAllSectionData:function(b){var c={};return plIsset(PLData.viewModel[b])&&a.each(PLData.viewModel[b],function(d,e){var f=PLData.viewModel[b][d]();plIsset(f)&&(_.isArray(f)?(c[d]={},a.each(f,function(b,e){c[d][b]={},a.each(e,function(a,e){c[d][b][a]=e()})})):c[d]=f)}),c},updateModelData:function(){var b=this,c=b.getData();a.each(c,function(b,c){a.each(c,function(a,c){plIsset(PLData.modelData[b])||(PLData.modelData[b]={values:{}}),plIsset(c)&&(plIsset(PLData.modelData[b].values[a])||(PLData.modelData[b].values[a]={}),PLData.modelData[b].values[a].value=c)})})},setMasterModel:function(){var b=this;PLData.viewModel=PLData.viewModel||{},a.each(PLData.modelData,function(a,c){b.loadSectionModel(a,c)})},loadSectionModel:function(b,c){var d=this;if("undefined"==typeof PLData.viewModel[b]){var e={};_.isEmpty(c)||(a.each(c.values,function(a,b){if(plIsset(b)){var f=(b.value,b.type),g=b.opts;e=d.setObservables(e,a,c,f,g)}else console.log("View model for "+a+" is set incorrectly.")}),PLData.viewModel[b]=e);var f=a.plStandardSettings.settingsArray();a.each(f,function(a,c){d.getSectionObservables(b,c.opts)})}},setObservables:function(a,b,c,d,e){var f=this,g=f.getValueFromKey(c,b);return _.isArray(g)||_.isObject(g)?a[b]=f.makeObservableArray(g,d,e):a[b]=ko.observable(g).extend({notify:"always"}),a},getValueFromKey:function(a,b){return a.values[b].value},asyncComputedArray:function(b,c){var d=ko.observableArray();return ko.computed(function(){b.call(c).done(function(b){var c=b,e=[];a.each(c.template,function(a,b){e.push(b)}),d(e)})}),d},makeObservableArray:function(b,c,d){var e=this,f=[];return a.each(b,function(b,c){a.extend(d,c),f.push(e.itemModel(d))}),ko.observableArray(f)},itemModel:function(b){var c={};return a.each(b,function(a,b){c[a]=ko.observable(b).extend({notify:"always"})}),c},getSectionObservables:function(b,c){var d=this;a.each(c,function(a,c){_.isEmpty(c.opts)||d.getSectionObservables(b,c.opts),_.isUndefined(c.key)||plIsset(PLData.viewModel[b][c.key])||(PLData.viewModel[b][c.key]=ko.observable(d.getInitValue(b,c.key)).extend({notify:"always"}))})},getInitValue:function(a,b){return plIsset(PLData.modelData[a])&&plIsset(PLData.modelData[a].values)?PLData.modelData[a].values[b]:null},sortObservableArrayByArray:function(b,c,d){var e=[];theArray=PLData.viewModel[b][c](),a.each(d,function(a,b){e.push(theArray[b])}),PLData.viewModel[b][c].changeEvent=!0,PLData.viewModel[b][c](e)},RemoveItemByIndex:function(a,b,c){PLData.changeEvent=!0,PLData.viewModel[a][b].splice(c,1)},addItemToArray:function(a,b,c){var d=this;PLData.changeEvent=!0,observableItem=d.itemModel(c),PLData.viewModel[a][b].push(observableItem)},setObservableArray:function(a,b,c){PLData.viewModel[a][b]=ko.observableArray(c).extend({notify:"always"})},setNewObservable:function(a,b,c){PLData.viewModel[a][b]=ko.observable(c).extend({notify:"always"})}}}(window.jQuery),!function(a){a.plAdd={newSection:function(b,c,d){var e=this,f={hook:"load_section",object:b,UID:c,query:PLData.config.query,postSuccess:function(f){var g=(PLData.config.tplRender,PLData.config.tplCapture,"template");a(d).prependTo(plTop()(sprintf('.dd-list[data-region="%s"]',g))).hide().fadeIn(),a(f.template).prependTo(sprintf(".pl-region-wrap-%s",g));var h=a(sprintf('[data-clone="%s"]',c));e.addScripts(f),a.plScrolling.scrollToSection(h),plTop().plEditing.reloadUI(),a.plBinding.bindNewSection(c,{object:b,values:f.model}),a.plModel.updateModelData(),plTop().plBuilder.updateTemplateMap(),plTop().plBuilder.doSortables(),plTrigger("redraw"),a(window).trigger("resize").trigger("scroll")}};a.plServer.run(f)},addScripts:function(b){plIsset(b.css_style)&&a("head").append(sprintf('<link rel="stylesheet" href="%s?rand=%s" type="text/css" />',b.css_style,Math.floor(999999*Math.random()))),plIsset(b.css_build)&&a("head").append(sprintf('<link rel="stylesheet" href="%s?rand=%s" type="text/css" />',b.css_build,Math.floor(999999*Math.random()))),plIsset(b.scripts)&&0!=b.scripts.length&&a.each(b.scripts,function(b,c){a("body").append(sprintf('<script id="live-injection" src="%s"></script>',c))})}}}(window.jQuery),!function(a){a(window).on("pl_page_ready",function(){a.plAnimation.init()}),a.plAnimation={init:function(){a("body").delegate(".pl-sn","template_ready",function(){a.plAnimation.doAnimation(a(this))})},doAnimation:function(b){var b=b||a("body");b.find(".pl-animation-group").find(".pl-animation").addClass("pla-group"),b.find(".pl-animation:not(.pla-group, .animation-loaded)").each(function(){var b=a(this);b.appear(function(){if(b.hasClass("pl-slidedown")){var c=b.find(".pl-end-height").outerHeight();b.css("height",c)}a(this).addClass("animation-loaded").trigger("animation_loaded")})}),b.find(".pl-animation-group").each(function(){var b=a(this);b.imagesLoaded(function(c){b.appear(function(){a(this).find(".pl-animation").size();a(this).find(".pl-animation:not(.animation-loaded)").each(function(b){var c=a(this);setTimeout(function(){c.addClass("animation-loaded hovered"),setTimeout(function(){c.removeClass("hovered")},700)},200*b)})})})})}}}(window.jQuery),!function(a){a.plBinding={startUp:function(){var b=this;b.plExtensions(),b.extensions(),a("body").trigger("pl_extend_bindings"),b.applyModel()},doTemplateTriggers:function(b,c,d){c();if(a(b).trigger("edited"),PLData.changeEvent)if(a(b).hasClass("pl-trigger-el"))a(b).closest(".pl-trigger-container").trigger("template_updated");else if(a(b).hasClass("pl-trigger")||a(b).hasClass("pl-render-item")){var e=_.throttle(function(){a(b).closest(".pl-sn").trigger("template_ready")},100,{leading:!1});e()}else a(b).trigger("template_updated")},doTemplateAJAX:function(b,c,d,e,f){var g=this,h=ko.unwrap(e());if(plIsset(h)&&(PLData.changeEvent||a(d).hasClass("pl-load-lazy"))){var i={hook:"async_binding",value:h,mode:b,args:c,postSuccess:function(b){var c=b.template||"";wrap=sprintf('<div class="new">%s</div>',c),a(d).html(wrap);var h=a(d).closest(".pl-sn").trigger("template_ready").data("clone");newWrapper=a(d).find(".new"),ko.applyBindings(PLData.viewModel[h],newWrapper[0]),0==newWrapper.children().first().length&&newWrapper.wrapInner("<span/>"),newWrapper.children().first().unwrap(),g.doTemplateTriggers(d,e,f)}};a.plServer.run(i)}},doClass:function(b,c,d){var d=d||"",e="__pl__previousClassValue__"+d;b[e]&&a(b).removeClass(b[e]),a(b).addClass(c),b[e]=c},plExtensions:function(){var b=this;ko.bindingHandlers.plnav={update:function(c,d,e){var f=(ko.unwrap(d()),a(c)),g=f.data("mode"),h=f.data("class"),i=f.data("fallback");b.doTemplateAJAX("menu",{menu_class:h,mode:g,do_fallback:i},c,d,e)}},ko.bindingHandlers.plsidebar={update:function(c,d,e){ko.unwrap(d()),a(c);b.doTemplateAJAX("sidebar",{},c,d,e)}},ko.bindingHandlers.plcallback={update:function(c,d,e){var f=(ko.unwrap(d()),a(c)),g=f.data("callback");b.doTemplateAJAX(g,{mode:g},c,d,e)}},ko.bindingHandlers.plshortcode={update:function(c,d,e){var f=ko.unwrap(d());b.isset(f)&&""!=f?d().modifyEvent&&a(c).html(f).removeClass("js-unset"):a(c).addClass("js-unset"),b.doTemplateAJAX("shortcodes",{},c,d,e)}},ko.bindingHandlers.plbtn={update:function(c,d,e){var f=ko.unwrap(d()),g=a(c),h=ko.dataFor(c),i=h[f+"_text"]()||"Button",j=h[f+"_style"]()||"default",k=h[f+"_size"]()||"st",l=h[f]();g.html(i),b.isset(l)&&""!=l?g.attr("href",pl_do_shortcode(l)).removeClass("js-unset"):g.addClass("js-unset"),b.doClass(c,"pl-btn-"+j,"style"),b.doClass(c,"pl-btn-"+k,"size")}},ko.bindingHandlers.plclassname={update:function(c,d,e){var f=ko.unwrap(d());_.isArray(f)?a.each(f,function(a,d){b.doClass(c,d,a)}):b.doClass(c,f),b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers["class"]={update:function(a,c,d){var e=ko.unwrap(c());b.doClass(a,e),b.doTemplateTriggers(a,c,d)}},ko.bindingHandlers.plbg={update:function(c,d,e){var f=ko.unwrap(d()),g=(e.get("args")||{},"");b.isset(f)?(g=pl_do_shortcode(f),a(c).css("backgroundImage",sprintf("url(%s)",g))):a(c).css("backgroundImage",""),b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers.plimg={update:function(c,d,e){var f=ko.unwrap(d());b.isset(f)&&""!=f?a(c).attr("src",pl_do_shortcode(f)).removeClass("js-unset"):a(c).removeAttr("src").addClass("js-unset"),b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers.pltext={update:function(c,d,e){var f=ko.unwrap(d());b.isset(f)&&""!==f?a(c).html(f).removeClass("js-unset"):a(c).addClass("js-unset"),b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers.plhref={update:function(c,d,e){var f=ko.unwrap(d());b.isset(f)&&""!==f?a(c).attr("href",pl_do_shortcode(f)):a(c).removeAttr("href"),b.doTemplateTriggers(c,d,e)}}},isset:function(a){return"undefined"!=typeof a&&null!==a},applyModel:function(){var b=this;a(".pl-sn").length;a(".pl-sn").each(function(c){var d=a(this).data("clone"),e=a(this);plIsset(d)&&setTimeout(function(){ko.applyBindings(PLData.viewModel[d],e[0]),b.startSection(e)})})},startSection:function(a){a.parent().hasClass("temp-wrap")&&a.unwrap(),a.trigger("template_ready").addClass("js-loaded")},bindNewSection:function(b,c){var d=this,e=a(sprintf('[data-clone="%s"]',b));a("body").trigger("pl_extend_bindings"),e.length?(a.plModel.loadSectionModel(b,c),a.each(PLData.viewModel[b],function(a,c){PLData.viewModel[b][a].modifyEvent=!0}),d.applySectionBinds(PLData.viewModel[b],e)):console.log("Error: A bindable section was not found.")},applySectionBinds:function(a,b){var c=this;ko.applyBindings(a,b[0]),c.startSection(b)},extensions:function(){var b=this;ko.bindingHandlers.plstyle={update:function(a,c,d,e,f){var g=c();ko.utils.unwrapObservable(g);return ko.bindingHandlers.style.update(a,c,d,e,f),b.doTemplateTriggers(a,c,d),{controlsDescendantBindings:!0}}},ko.bindingHandlers.plforeach={init:function(a,b){return ko.bindingHandlers.foreach.init(a,b)},update:function(a,c,d,e,f){var g=c();ko.utils.unwrapObservable(g);return ko.bindingHandlers.foreach.update(a,c,d,e,f),b.doTemplateTriggers(a,c,d),{controlsDescendantBindings:!0}}},ko.bindingHandlers.pltemplate={init:function(a,b){return ko.bindingHandlers.template.init(a,b)},update:function(a,c,d,e,f){var g=c();if(!_.isEmpty(g.foreach))return ko.bindingHandlers.template.update(a,c,d,e,f),b.doTemplateTriggers(a,c,d),{controlsDescendantBindings:!0}}},ko.bindingHandlers.plcss={update:function(a,c,d,e,f){c();return ko.bindingHandlers.css.update(a,c,d,e,f),b.doTemplateTriggers(a,c,d),{controlsDescendantBindings:!0}}},ko.bindingHandlers.plvisible={update:function(a,c,d,e,f){c();return ko.bindingHandlers.visible.update(a,c,d,e,f),b.doTemplateTriggers(a,c,d),{controlsDescendantBindings:!0}}},ko.utils.domNodeDisposal.cleanExternalData=function(){},ko.bindingHandlers.plicons={update:function(c,d,e){var f=ko.unwrap(d()),g=f.split("\n"),h="";"undefined"!=typeof f&&""!==f&&a.each(g,function(a,b){pieces=b.split(" "),icon=plIsset(pieces[0])?pieces[0]:"",url=plIsset(pieces[1])?pieces[1]:"",""!=icon&&(h+=sprintf('<a class="iconlist-link" href="%s" target="_blank"><i class="pl-icon pl-icon-%s"></i></a>',url,icon))}),a(c).html(h),b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers.pllist={update:function(c,d,e){var f=ko.unwrap(d()),g=(e.get("flag")||!1,f.split("\n"));if("undefined"!=typeof f&&""!==f){var h="";a.each(g,function(a,b){var c="";"*"==b.substring(0,1)&&(c="emphasis",b=b.substring(1)),""!=b&&(h+=sprintf('<li class="pl-border %s">%s</li>',c,b))}),a(c).html(h),b.doTemplateTriggers(c,d,e)}}},ko.bindingHandlers.pledit={init:function(b,c,d,e,f){a(b).data("start_classes",a(b).attr("class"))},update:function(c){var d=ko.dataFor(c),e="",f=a(c).parent(),g=f.parent();plIsset(d.background())&&(e=sprintf("url(%s)",pl_do_shortcode(d.background())),f.css("backgroundImage",e)),plIsset(d.color())&&f.css("backgroundColor",d.color()),plIsset(d.textcolor())&&f.css("color",d.textcolor());var h=d.bgxpos(),i=d.bgypos();(plIsset(h)||plIsset(i))&&(h=plIsset(h)&&""!=h?h:0,i=plIsset(i)&&""!=i?i:0,f.css("backgroundPosition",h+"% "+i+"%"));var j=d.bgwidth(),k=d.bgheight(),l=d.bgcover();plIsset(l)&&""!=l?f.css("backgroundSize",l):(plIsset(j)||plIsset(k))&&(j=plIsset(j)&&""!=j?j+"px":"auto",k=plIsset(k)&&""!=k?k+"px":"auto",f.css("backgroundSize",j+" "+k)),plIsset(d.bgrepeat())&&f.css("backgroundRepeat",d.bgrepeat()),b.doClass(f[0],d.theme(),"scheme"),b.doClass(f[0],d.effects(),"effect"),plIsset(d.minheight())&&""!=d.minheight()?a(c).css("min-height",d.minheight()+"vw"):a(c).css("min-height","");var m=plIsset(d.col())&&""!=d.col()?d.col():"12",n=plIsset(d.offset())&&""!=d.col()?d.offset():"0";if(b.doClass(g[0],sprintf("pl-col-sm-%s pl-col-sm-offset-%s",m,n),"grid"),plIsset(d.contentwidth())&&""!==d.contentwidth()?f.find(".pl-content-area").css("max-width",d.contentwidth()+"px"):f.find(".pl-content-area").css("max-width",""),b.doClass(f[0],d.alignment(),"align"),plIsset(d.font_size())&&a(c).css("fontSize",d.font_size()+"em"),b.doClass(g[0],d.special_classes(),"special"),plIsset(d.hide_on())){var o="",p=d.hide_on().split(",");a.each(p,function(a,b){b!==PLData.config.editslug&&b!==PLData.config.editID&&b!==PLData.config.pageID||(o+="hide-on-page")}),b.doClass(g[0],o,"hide")}if(plIsset(d.video())&&""!=d.video()){var q=pl_do_shortcode(d.video()),r=q.substr(q.lastIndexOf(".")+1),s=sprintf('<source src="%s" type="video/%s">',q,r),t=sprintf('<div class="pl-bg-video-container"><video class="pl-bg-video" preload autoplay loop muted>%s</video></div>',s);0==f.children(".pl-bg-video-container").length?f.prepend(t):f.children(".pl-bg-video-container video").html(s)}else f.children(".pl-bg-video-container").remove();if(plIsset(d.overlay())){e=sprintf("url(%s)",pl_do_shortcode(d.overlay()));var t='<div class="pl-bg-overlay" ></div>';0==f.children(".pl-bg-overlay").length&&f.prepend(t),f.find(".pl-bg-overlay").css("backgroundImage",e)}else f.children(".pl-bg-overlay").remove();var u="vw",v=["top","right","bottom","left"],w={padding:"",margin:""};a.each(w,function(b,e){a.each(v,function(a,c){var e=d[b+"_"+c](),f=parseFloat(e);isNaN(f)||"undefined"==typeof f?w[b]+="0 ":w[b]+=f+u+" "}),-1!=w[b].lastIndexOf(u)?(w[b]=w[b].substring(0,w[b].lastIndexOf(u)+2),a(c).css(b,w[b])):a(c).css(b,"")}),a(window).trigger("redraw")}},ko.bindingHandlers.plattr={update:function(c,d,e,f,g){var h=d(),i=ko.unwrap(h),j=e.get("unit")||!1;if("undefined"!=typeof i&&""!==i){var k={};a.each(i,function(a,b){"percent"==j?(newVal=100*b,newVal+="%"):newVal=b,k[a]=pl_do_shortcode(newVal)}),ko.bindingHandlers.attr.update(c,function(){return k},e,f,g),b.doTemplateTriggers(c,d,e)}}},ko.bindingHandlers.plclass={update:function(c,d,e){var f=(d(),ko.unwrap(d()));if(_.isObject(f)||_.isArray(f))a.each(f,function(){if(b.isset(f)){var d=a(this)[0],e=d.partial||"pl-control-",g=d.wlabel||[],h=d.child||!1,i=d.dflt||"default",j=String(d.tag);j=""==j?i:j,j=j.replace(e,""),h?a(c).find(h).each(function(){pl_remove_class_partial(a(this),e,g),a(this).addClass(e+j)}):(pl_remove_class_partial(a(c),e,g),a(c).addClass(e+j))}});else if("undefined"!=typeof f){var g=e.get("partial")||"pl-control-",h=e.get("wlabel")||[],i=e.get("dflt")||"default",f=""==f?i:f,j=f.split(" "),k=e.get("child")||!1;k?a(c).find(k).each(function(){var b=a(this);pl_remove_class_partial(b,g,h),a.each(j,function(a,c){c=c.replace(g,""),b.addClass(g+c)})}):(pl_remove_class_partial(a(c),g,h),a.each(j,function(b,d){d=d.replace(g,""),a(c).addClass(g+d)}))}b.doTemplateTriggers(c,d,e)}},ko.bindingHandlers.instantValue={init:function(a,b,c){var d=function(){return ko.utils.extend(c(),{valueUpdate:"afterkeydown"})};d.get=function(a){return"valueupdate"===a?"afterkeydown":c.get(a)},d.has=function(a){return"valueupdate"===a||c.has(a)},ko.bindingHandlers.value.init(a,b,d)},update:ko.bindingHandlers.value.update},ko.bindingHandlers.toggle={init:function(a,b){var c=b();ko.applyBindingsToNode(a,{click:function(){c(!c())}})}},ko.bindingHandlers.toJSON={update:function(a,b){return ko.bindingHandlers.text.update(a,function(){return ko.toJSON(b(),null,2)})}},ko.virtualElements.allowedBindings.stopBinding=!0,ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}}}}}(window.jQuery),!function(a){a(window).on("pl_page_ready",function(){a.plStandard.init(),a.plStandard.handleSearchfield(),a.plScrolling.init(),a(document).trigger("plReady"),a(window).trigger("resize")}),window.$pl=function(){return window.PLData},window.$plServer=function(){return a.plServer},window.plTop=function(){return window.parent.jQuery},window.plAddNewLinks=function(){"undefined"!=typeof plTop().plFrame&&plTop().plFrame.handleFrameLinks()},window.plTrigger=function(b){var b=b||"ready";"ready"==b?a(window).trigger("pl_page_ready"):"change"==b?a("body").trigger("pl_page_change"):"redraw"==b&&a(window).trigger("redraw"),a(window).trigger("resize").trigger("scroll")},a("body").on("pl_load_event",function(a,b){plAddNewLinks()}),a.plScrolling={init:function(){},scrollToSection:function(b){0!=b.length&&(b.addClass("section-glow"),a("body,html").animate({scrollTop:b.offset().top-40},1e3,"swing",function(){setTimeout(function(){b.removeClass("section-glow")},1e3)}))},scrollToItem:function(b){0==b.length&&(b=a("body")),a("body,html").animate({scrollTop:Math.round(b.offset().top-40)},500,"swing")}},a.plStandard={init:function(){var a=this;plAdjustAdminBar(),a.mobileToggles()},mobileToggles:function(){a("body").delegate(".pl-mobile-toggle","click",function(){var b=a(this),c=b.closest(".pl-mobile-container");c.hasClass("toggle-open")?c.removeClass("toggle-open"):c.addClass("toggle-open")})},handleSearchfield:function(){a(".searchfield").on("focus",function(){a(this).parent().parent().addClass("has-focus")}).on("blur",function(){a(this).parent().parent().removeClass("has-focus")}),a(".pl-searcher").on("click touchstart",function(b){b.stopPropagation();var c=a(this),d=c.parent().parent();a(this).addClass("has-focus").parent().find(".search-field").focus(),d.addClass("showing-search"),a("body").on("click touchstart",function(){c.removeClass("has-focus"),d.removeClass("showing-search")})})}}}(window.jQuery),!function(a){a.plServer={run:function(b){var c=this,d={action:"pl_server",hook:"",pageID:PLData.config.pageID,typeID:PLData.config.typeID,editID:PLData.config.editID,editslug:PLData.config.editslug,tplMode:PLData.config.tplMode,tplActive:PLData.config.tplActive,tplCapture:PLData.config.tplCapture,nonce:PLData.config.nonce,beforeSend:"",postSuccess:"",args:{}};return a.extend(d,b),plIsset(d.hook)?c.doAJAX(d):(console.log("No hook set for AJAX server request."),!1)},doAJAX:function(b){theData=a.extend({},b),delete theData.beforeSend,delete theData.postSuccess;var c={type:"POST",url:PLData.urls.ajaxURL,data:theData,beforeSend:function(){a.isFunction(b.beforeSend)&&b.beforeSend.call(this)},success:function(c){var d=c;a.isFunction(b.postSuccess)&&b.postSuccess.call(this,d)},error:function(a,b,c){console.log("------ AJAX Error ------"),console.log(a),console.log(b),console.log(c)}};return a.ajax(c)}}}(window.jQuery);